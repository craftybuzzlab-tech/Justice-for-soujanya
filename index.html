<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Justice for Sowjanya</title>
    
    <!-- Firebase SDK Scripts -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

    <style>
        body {
            font-family: sans-serif;
            background-color: #0c0f13;
            color: #fff;
            text-align: center;
            margin: 0;
            padding: 80px 20px; /* Space for ads */
            box-sizing: border-box;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .ad-container-top, .ad-container-bottom {
            position: fixed;
            left: 0;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(2px);
            z-index: 99;
        }
        .ad-container-top { top: 0; padding: 5px 0; }
        .ad-container-bottom { bottom: 0; padding: 5px 0; }

        .container {
            max-width: 600px;
            margin: auto;
            border: 2px solid #ff5722;
            border-radius: 15px;
            padding: 20px;
            background-color: rgba(44, 44, 44, 0.9);
            position: relative;
            z-index: 1;
        }

        .fire-heading {
            font-size: 2.8em;
            font-weight: bold;
            font-family: 'Arial Black', sans-serif;
            color: #1a1a1a;
            animation: zoom-in-out 3s ease-in-out infinite alternate;
            text-shadow: 0 0 1px #FFF, 0 0 3px #FFF, 0 0 5px #FFF, 0 0 8px #ff8c00, 0 0 12px #ff8c00, 0 0 18px #ff5722, 0 0 25px #ff5722, 0 0 40px #ff5722;
        }
        @keyframes zoom-in-out { from { transform: scale(1); } to { transform: scale(1.05); } }

        .main-content { display: flex; align-items: center; justify-content: center; margin: 20px 0; gap: 15px; }
        .main-image { max-width: 60%; height: auto; border-radius: 10px; border: 3px solid #ff8c00; }
        .diya { width: 22%; position: relative; }
        .diya::after { content: ''; position: absolute; width: 14px; height: 21px; background: #ffc107; border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%; top: 25%; left: 50%; transform: translateX(-50%); animation: flame-flicker 1.5s ease-in-out infinite; z-index: 2; }
        .diya::before { content: '?'; position: absolute; top: 25%; left: 50%; transform: translateX(-50%); font-size: 30px; color: rgba(255, 255, 220, 0.8); animation: bright-glint 3s ease-in-out infinite; z-index: 1; }
        @keyframes flame-flicker { 0%, 100% { box-shadow: 0 0 5px #ffc107, 0 0 10px #ff9800, 0 0 15px #ff5722; transform: translateX(-50%) scaleY(1) scaleX(1); opacity: 1; } 50% { box-shadow: 0 0 10px #ffc107, 0 0 20px #ff9800, 0 0 35px #ff5722, 0 0 50px #ff5722; transform: translateX(-45%) scaleY(1.05) scaleX(1.05); opacity: 0.9; } }
        @keyframes bright-glint { 0%, 100% { transform: translateX(-50%) scale(0.8) rotate(0deg); opacity: 0.5; } 50% { transform: translateX(-50%) scale(1.2) rotate(180deg); opacity: 1; } }
        
        .poll-section { border-top: 1px solid #ff5722; padding-top: 15px; margin-top: 20px; }
        .poll-title { font-size: 1.5em; margin-bottom: 15px; font-weight: bold; }
        
        /* --- **UPDATED** Layout for Poll and Comment Box --- */
        .actions-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap; /* Allows items to wrap on small screens */
        }
        .poll-buttons { display: flex; gap: 10px; position: relative; }
        .poll-btn { background-color: #444; border: 2px solid #ff8c00; color: #fff; padding: 10px 15px; border-radius: 8px; font-size: 1.1em; cursor: pointer; transition: background-color 0.3s, transform 0.2s; display: flex; align-items: center; gap: 8px; }
        .poll-btn:hover { background-color: #ff5722; }
        .poll-btn:active { transform: scale(0.95); }
        .poll-btn.disabled { background-color: #333; cursor: not-allowed; opacity: 0.6; }
        .poll-btn svg { width: 22px; height: 22px; }
        #like-btn svg { fill: #e53935; }
        #dislike-btn svg { fill: #212121; }

        .comment-box { display: flex; align-items: center; gap: 10px; }
        .comment-textarea {
            width: 150px; /* Fixed width */
            height: 35px;
            padding: 8px;
            border-radius: 8px;
            border: 1px solid #555;
            background-color: #333;
            color: #e0e0e0;
            font-size: 0.9em;
            resize: none;
        }
        .submit-btn {
            background-color: #ff8a00;
            color: #121212;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            font-weight: bold;
            font-size: 0.9em;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .submit-btn:hover { background-color: #ffac4d; }

        .fire-popup { position: absolute; left: 50%; top: 50%; font-size: 2.5em; animation: float-up 1.5s ease-out forwards; pointer-events: none; }
        @keyframes float-up { 0% { opacity: 1; transform: translate(-50%, -50%) scale(1); } 100% { opacity: 0; transform: translate(-50%, -150px) scale(1.5); } }

        .share-buttons-container { margin-top: 25px; display: flex; justify-content: center; gap: 15px; flex-wrap: wrap; }
        .share-btn { display: inline-flex; align-items: center; gap: 10px; color: white; padding: 12px 25px; border-radius: 8px; text-decoration: none; font-size: 1.2em; font-weight: bold; border: none; cursor: pointer; transition: background-color 0.3s; }
        #whatsapp-share-btn { background-color: #25D366; }
        #whatsapp-share-btn:hover { background-color: #128C7E; }
        #copy-link-btn { background-color: #007bff; }
        #copy-link-btn:hover { background-color: #0056b3; }
        .share-btn svg { width: 28px; height: 28px; fill: white; }
        
        @media (max-width: 600px) {
            .fire-heading { font-size: 1.8em; }
            .main-image { max-width: 50%; }
            .diya { width: 25%; }
            .actions-container { flex-direction: column; } /* Stack items on mobile */
        }
    </style>
</head>
<body>
    <div class="ad-container-top">
        <script type="text/javascript">
            atOptions = { 'key' : '0702b151wUmbCxfRaxiitBdmNyEy9r5W1tjjek1', 'format' : 'iframe', 'height' : 60, 'width' : 468, 'params' : {} };
        </script>
        <script type="text/javascript" src="//www.highperformanceformat.com/0702b151wUmbCxfRaxiitBdmNyEy9r5W1tjjek1/invoke.js"></script>
    </div>

    <div class="container">
        <h1 class="fire-heading">JUSTICE FOR SOWJANYA</h1>
        <div class="main-content">
            <img src="diya.png" alt="Diya" class="diya">
            <img src="sowjanya-image.jpg" alt="Justice for Sowjanya" class="main-image">
            <img src="diya.png" alt="Diya" class="diya">
        </div>
        <div class="poll-section">
            <p class="poll-title">Poll</p>
            <div class="actions-container">
                <div class="poll-buttons">
                    <button id="like-btn" class="poll-btn">
                        <svg viewBox="0 0 24 24"><path d="M12,21.35L10.55,20.03C5.4,15.36 2,12.27 2,8.5C2,5.41 4.42,3 7.5,3C9.24,3 10.91,3.81 12,5.08C13.09,3.81 14.76,3 16.5,3C19.58,3 22,5.41 22,8.5C22,12.27 18.6,15.36 13.45,20.03L12,21.35Z"/></svg>
                        <span id="like-count">0</span>
                    </button>
                    <button id="dislike-btn" class="poll-btn">
                        <svg viewBox="0 0 24 24"><path d="M12,21.35L10.55,20.03C5.4,15.36 2,12.27 2,8.5C2,5.41 4.42,3 7.5,3C9.24,3 10.91,3.81 12,5.08C13.09,3.81 14.76,3 16.5,3C19.58,3 22,5.41 22,8.5C22,12.27 18.6,15.36 13.45,20.03L12,21.35Z"/></svg>
                        <span id="dislike-count">0</span>
                    </button>
                </div>
                <div class="comment-box">
                    <textarea id="comment-input" class="comment-textarea" placeholder="Comment..."></textarea>
                    <button id="submit-comment-btn" class="submit-btn">Submit</button>
                </div>
            </div>
        </div>
        <div class="share-buttons-container">
            <button id="whatsapp-share-btn" class="share-btn">
                <svg viewBox="0 0 24 24"><path d="M12.04 2C6.58 2 2.13 6.45 2.13 11.91C2.13 13.66 2.61 15.35 3.48 16.81L2.1 21.9L7.45 20.58C8.85 21.36 10.42 21.82 12.04 21.82C17.5 21.82 21.95 17.37 21.95 11.91C21.95 9.25 20.92 6.78 19.05 4.91C17.18 3.03 14.71 2 12.04 2M12.04 20.14C10.59 20.14 9.17 19.72 7.96 19L7.54 18.76L4.29 19.57L5.12 16.4L4.86 15.96C4.04 14.65 3.61 13.15 3.61 11.91C3.61 7.33 7.42 3.53 12.04 3.53C14.28 3.53 16.33 4.38 17.89 5.94C19.45 7.5 20.3 9.55 20.3 11.91C20.3 16.5 16.5 20.14 12.04 20.14M17.43 14.86C17.21 14.75 16.06 14.2 15.85 14.12C15.63 14.04 15.47 13.99 15.31 14.21C15.15 14.42 14.68 14.99 14.53 15.15C14.37 15.31 14.22 15.33 14 15.22C13.78 15.12 12.98 14.84 12.03 14C11.23 13.29 10.69 12.43 10.54 12.22C10.38 12 10.25 11.85 10.41 11.69C10.56 11.53 10.72 11.33 10.85 11.17C10.98 11.02 11.03 10.91 11.13 10.74C11.24 10.56 11.18 10.41 11.08 10.31C10.98 10.21 10.47 9.95 10.27 9.85C10.08 9.75 9.92 9.72 9.75 9.72C9.59 9.72 9.42 9.77 9.27 9.92C9.11 10.08 8.65 10.54 8.5 10.69C8.34 10.85 8.19 10.88 7.97 10.88C7.75 10.88 7.55 10.83 7.35 10.73C7.15 10.63 6.34 10.35 5.39 9.47C4.6 8.76 4.05 7.9 3.9 7.68C3.75 7.47 3.88 7.33 4.03 7.19L4.03 7.19C4.16 7.08 4.29 6.94 4.41 6.82C4.54 6.69 4.59 6.58 4.69 6.41C4.79 6.23 4.74 6.08 4.64 5.98C4.54 5.88 4.03 5.63 3.83 5.53C3.64 5.43 3.48 5.4 3.31 5.4C3.15 5.4 2.98 5.45 2.82 5.6C2.67 5.76 2.2 6.23 2.05 6.38C1.9 6.54 17.43 14.86Z"/></svg>
                <span>WhatsApp</span>
            </button>
            <button id="copy-link-btn" class="share-btn">
                <svg viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg>
                <span>Copy Link</span>
            </button>
        </div>
    </div>

    <div class="ad-container-bottom">
        <script type="text/javascript">
            atOptions = { 'key' : '0702b151wUmbCxfRaxiitBdmNyEy9r5W1tjjek1', 'format' : 'iframe', 'height' : 60, 'width' : 468, 'params' : {} };
        </script>
        <script type="text/javascript" src="//www.highperformanceformat.com/0702b151wUmbCxfRaxiitBdmNyEy9r5W1tjjek1/invoke.js"></script>
    </div>

    <script>
        const firebaseConfig = { apiKey: "AIzaSyCMawkDgEHVjTOtlVWy6doUBLEJFcW6qSo", authDomain: "justice-sowjanya-poll.firebaseapp.com", databaseURL: "https://justice-sowjanya-poll-default-rtdb.firebaseio.com", projectId: "justice-sowjanya-poll", storageBucket: "justice-sowjanya-poll.appspot.com", messagingSenderId: "601732076929", appId: "1:601732076929:web:c98d4dd38ab80a5eff0480", measurementId: "G-6P5TTVNRCB" };
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        
        const likeBtn = document.getElementById('like-btn'); 
        const dislikeBtn = document.getElementById('dislike-btn'); 
        const likeCountSpan = document.getElementById('like-count'); 
        const dislikeCountSpan = document.getElementById('dislike-count'); 
        const copyLinkBtn = document.getElementById('copy-link-btn');
        const likesRef = database.ref('votes/likes'); 
        const dislikesRef = database.ref('votes/dislikes');
        
        // **UPDATED** Comment elements
        const commentInput = document.getElementById('comment-input');
        const submitCommentBtn = document.getElementById('submit-comment-btn');
        const commentsRef = database.ref('comments');

        likesRef.on('value', (snapshot) => { likeCountSpan.textContent = snapshot.val() || 0; });
        dislikesRef.on('value', (snapshot) => { dislikeCountSpan.textContent = snapshot.val() || 0; });

        function showFirePopup(type) { const pollButtons = document.querySelector('.poll-buttons'); const popup = document.createElement('span'); popup.className = 'fire-popup'; popup.textContent = (type === 'like') ? '??' : '??'; pollButtons.appendChild(popup); setTimeout(() => { popup.remove(); }, 1500); }

        function handleVote(type) {
            if (localStorage.getItem('sowjanyaVoted')) {
                alert('You have already voted.');
                return;
            }
            showFirePopup(type);
            const ref = (type === 'like') ? likesRef : dislikesRef;
            ref.transaction((currentCount) => (currentCount || 0) + 1);
            localStorage.setItem('sowjanyaVoted', 'true');
            likeBtn.classList.add('disabled');
            dislikeBtn.classList.add('disabled');
            likeBtn.disabled = true;
            dislikeBtn.disabled = true;
        }

        likeBtn.addEventListener('click', () => handleVote('like'));
        dislikeBtn.addEventListener('click', () => handleVote('dislike'));

        if (localStorage.getItem('sowjanyaVoted')) {
            likeBtn.classList.add('disabled');
            dislikeBtn.classList.add('disabled');
            likeBtn.disabled = true;
            dislikeBtn.disabled = true;
        }
        
        // **UPDATED** Comment submission logic
        submitCommentBtn.addEventListener('click', () => {
            const comment = commentInput.value.trim();
            if (comment === "") {
                alert('Please write a comment before submitting.');
                return;
            }
            const newComment = {
                text: comment,
                timestamp: firebase.database.ServerValue.TIMESTAMP
            };
            commentsRef.push(newComment);
            commentInput.value = '';
            alert('Your comment has been submitted anonymously.');
        });
        
        const whatsappShareBtn = document.getElementById('whatsapp-share-btn');
        whatsappShareBtn.addEventListener('click', () => { const message = "Support the call for Justice for Sowjanya. See the details and cast your vote here: "; const websiteUrl = window.location.href; const whatsappUrl = `https://api.whatsapp.com/send?text=${encodeURIComponent(message + websiteUrl)}`; window.open(whatsappUrl, '_blank'); });
        copyLinkBtn.addEventListener('click', () => { navigator.clipboard.writeText(window.location.href).then(() => { alert('Link copied to clipboard!'); }, () => { alert('Could not copy link.'); }); });

    </script>
</body>
</html>
